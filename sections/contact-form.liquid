<div class='flex flex-col items-start mt-6 md:mt-8'>
  <div class="contact-heading w-full md:w-x754 max-w-full">
    {%- if section.settings.title != blank -%}
      <h1 class="text-base md:text-lg font-bold text-grey-900 m-0 mb-3 md:mb-4">
        {{ section.settings.title }}
      </h1>
    {%- endif -%}

    {% if section.settings.description != blank %}
      {{ section.settings.description }}
    {% endif %}
  </div>

  {% if section.settings.note != blank %}
    <div class="mt-4 md:mt-8 message message-error !py-2 !px-4 w-full">
      <p class="m-0 font-medium">{{ section.settings.note }}</p>
    </div>
  {% endif %}

  {%- form 'contact', class: 'contact-form w-full mt-4 md:mt-8' -%}
    {%- if form.errors -%}
      <div class='p-5 border'>
        <div class='flex flex-row items-center w-full mb-4 md:mb-6'>
          <div class='text-red-500'>
            {% render 'icon-failed' %}
          </div>
          <div class='text-sm font-medium message message-error'>
            <p class="text-border-error">Error submitting your message, please try again later...</p>
            <div class="close-message">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" fill="#BE1111"></path> 
                <path d="M10 6L6 10" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path>
                <path d="M10 10L6 6" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </div>
          </div>
        </div>
        <ul class='px-4 mb-3 list-decimal ml-7'>
          {%- for error in form.errors -%}
            <li>
              <span>{{ form.errors.messages[error] }}</span>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {%- elsif form.posted_successfully? -%}
      <div class='flex flex-row items-center w-full mb-4 md:mb-6'>
        <div class='text-green-500'>
          {% render 'icon-success' %}
        </div>
        <div class='text-sm font-medium message message-success w-full'>
          <p class="text-success-content">Your message has been sent successfully</p>
          <div class="close-message">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" fill="#20A746"></path>
              <path d="M10.75 6.5L7.08125 10L5.25 8.25" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
          </div>
        </div>
      </div>
    {%- endif -%}
    <div class='items-center justify-center flex-1 mx-auto'>
      <div class='flex mb-4 md:mb-6'>
        <div class='w-full field__select'>
          <select name="contact[topic]" class="w-full">
            <option value="Existing Online Order">Existing Online Order</option>
            <option value="Returns">Returns</option>
            <option value="Product and Size Information">Product and Size Information</option>
            <option value="Shipping and Delivery Information">Shipping and Delivery Information</option>
            <option value="Promotions">Promotions</option>
            <option value="Website/Account Issues">Website/Account Issues</option>
            <option value="General Enquiry">General Enquiry</option>
          </select>
          <label>Select a topic</label>
        </div>
      </div>

      <div class='flex flex-wrap md:flex-nowrap mb-4 md:mb-6'>
        <div class='field__input md:mr-2 w-full md:w-1/2'>
          <input
            class='w-full px-4 py-3 mb-4 md:mb-3 md:mb-0 text-grey-900 border rounded'
            id='contact_name'
            name='contact[name]'
            type='text'
            placeholder="Full name *"
          >
          <label
            class='text-sm font-normal text-grey-500'
            for='contact_name'
            >Full name *</label
          >
        </div>
        <div class='field__input md:ml-2 w-full md:w-1/2'>
          <input
            class='w-full px-4 py-3 md:mb-3 md:mb-0 text-grey-900 border rounded'
            id='contact_email'
            name='contact[email]'
            type='text'
            placeholder="Email *"
          >
          <label
            class='text-sm font-normal text-grey-500'
            for='contact_email'
            >Email *</label
          >
        </div>
      </div>
      <div class='flex flex-wrap md:flex-nowrap mb-4 md:mb-6'>
        <div class='field__input md:mr-2 w-full md:w-1/2'>
          <input
            class='w-full px-4 py-3 mb-4 md:mb-0 text-grey-900 border rounded'
            id='contact_phone'
            name='contact[phone]'
            type='text'
            placeholder="Phone *"
          >
          <label
            class='text-sm font-normal text-grey-500'
            for='contact_phone'
            >Phone *</label
          >
        </div>
        <div class='field__input md:ml-2 w-full md:w-1/2'>
          <input
            class='w-full px-4 py-3 md:mb-0 text-grey-900 border rounded'
            id='contact_orderNumber'
            name='contact[order]'
            type='text'
            placeholder="Order number"
          >
          <label
            class='text-sm font-normal text-grey-500'
            for='contact_orderNumber'
            >Order number</label
          >
        </div>
      </div>
      <div class='flex'>
        <div class='field__input field__textarea w-full'>
          <textarea
            class='w-full h-x120 px-4 py-3 mb-0 text-grey-900 border rounded'
            id='contact_message'
            name='contact[body]'
            placeholder="Comments/Questions"
          ></textarea>
          <label
            class='text-sm font-normal text-grey-500'
            for='contact_message'
            >Comments/Questions</label
          >
        </div>
      </div>
      <div class='mb-0 flex-px-1 mt-4 md:mt-6'>
        <div class='w-full'>
          <button type="submit" class="btn btn-primary show-shadow w-full md:w-x226">Submit message</button>
        </div>
      </div>
    </div>
  {%- endform -%}
</div>

{% capture src_url %}{{ 'contact-form.js' | asset_url }}{% endcapture %}
{% render 'atom_script', src: src_url, priority: 'normal', type: "defer" %}

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p></p>"
    },
    {
      "type": "text",
      "id": "note",
      "label": "Note",
      "default": "Our phone lines are currently out of service due to technical issues. We apologise for the inconvenience."
    }
  ],
  "presets": [
    {
      "name": "Contact Form"
    }
  ]
}
{% endschema %}
